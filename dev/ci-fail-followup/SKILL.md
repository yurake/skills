---
name: ci-fail-followup
description: PR 作成後に .github/workflows/ci.yml が失敗したときの対応手順。ローカルで pytest 全ケースを実行し、エラー有無で分岐。エラーがあれば修正して commit-push スキルでコミット・プッシュ、無ければ GitHub Actions のログを確認して原因を特定する。
---

# トリガー
- PR 作成後に GitHub Actions の CI（.github/workflows/ci.yml）が失敗したとき。

# 手順
1. ローカルで pytest 全ケースを実行する  
   - `uv run --extra dev pytest` で全テストを動かし、失敗を確認する。
2. エラーがあった場合  
   - 失敗テストを修正する。  
   - `skills/commit-push/` の手順に従いコミット・プッシュする。
3. エラーがなかった場合  
   - GitHub Actions の該当実行のログを確認し、失敗ステップとエラーメッセージを特定する。  
   - 必要に応じて環境差分（依存、権限、パス）を確認し、対処を検討する。
4. 追加でテストや再実行が必要な場合  
   - ローカルで再現できない場合はワークフローを手元で再現するか、再実行を行いログを記録する。

# チェックリスト
- [ ] `uv run --extra dev pytest` を実行したか
- [ ] ローカルでの失敗を修正したか（あれば）
- [ ] 修正後に commit-push スキルでコミット・プッシュしたか
- [ ] ローカルで失敗が無い場合は Actions のログを確認したか
- [ ] 失敗ステップとエラーメッセージを特定したか
- [ ] 必要な追加テストや再実行を検討したか
